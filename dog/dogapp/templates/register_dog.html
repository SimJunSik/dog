<!DOCTYPE html>
<html>
<head>
	<title></title>
	<script async src="https://www.googletagmanager.com/gtag/js?id=UA-110211149-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-110211149-1');
  </script>
  <meta property="og:image" content="http://puppysignal.com/static/img/seoyoung_img.jpg"/>
  <meta name="description" content="내게 맞는 강아지를 찾아보세요.">
  <meta property="og:type" content="website">
  <meta property="og:title" content="퍼피시그널">
  <meta property="og:description" content="내게 맞는 강아지를 찾아보세요.">
  <meta property="og:url" content="http://puppysignal.com">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <meta charset="utf-8">
    <style>
    @import url(http://fonts.googleapis.com/earlyaccess/hanna.css);

    *{
      font-family: 'Hanna', serif;
      margin : 0;
      padding : 0;
    }

      /* Always set the map height explicitly to define the size of the div
       * element that contains the map. */
      @media (min-width:750px) {
      /* Always set the map height explicitly to define the size of the div
       * element that contains the map. */
      #map {
        height: 100%;
      }
      /* Optional: Makes the sample page fill the window. */
      html, body {
        height: 100%;
        margin: 0;
        padding: 0;
      }

      #floating-panel {
        position: absolute;
        top: 10px;
        left: 25%;
        z-index: 5;
        background-color: #fff;
        padding: 5px;
        border: 1px solid #999;
        text-align: center;
        font-family: 'Roboto','sans-serif';
        line-height: 30px;
        padding-left: 10px;
      }
    }

    @media (max-width:750px) {
      /* Always set the map height explicitly to define the size of the div
       * element that contains the map. */
      #map {
        height: 100vw;
      }
      /* Optional: Makes the sample page fill the window. */
      html, body {
        height: 100%;
        margin: 0;
        padding: 0;
      }

      #floating-panel {
        position: absolute;
        top: 10px;
        left: 25%;
        z-index: 5;
        background-color: #fff;
        padding: 5px;
        border: 1px solid #999;
        text-align: center;
        font-family: 'Roboto','sans-serif';
        line-height: 30px;
        padding-left: 10px;
      }
    }

    </style>
	<style type="text/css">
		@media (min-width:750px) {
    /*  상단 고정 메뉴바 css  */
  
    .top{
      width: 100%;
      position: fixed;     /*  화면상 위치 고정  */
      z-index: 6;          /*  z값 결정  */
      top : 0;
      height: 5vw;
      background-color: white;
    }

    .top_logo{
      position: relative;
      margin-top: 0.5vw;
      margin-left: 50%;
      -webkit-transform: translate(-50%, 0%);
      -ms-transform: translate(-50%, 0%);
      -moz-transform: translate(-50%, 0%);
      -o-transform: translate(-50%, 0%);
      transform: translate(-50%, 0%);
      width: 30%;
      text-align: center;
      font-weight: 900;
    }
    .top_nav{  
      position: relative;
      /*margin-top: 3%;*/    /*  top 여백 설정  */
      width: 50%;
      margin-left: 50%;
      -webkit-transform: translate(-50%, 0%);
      -ms-transform: translate(-50%, 0%);
      -moz-transform: translate(-50%, 0%);
      -o-transform: translate(-50%, 0%);
      transform: translate(-50%, 0%);
      text-align: center;
      margin-top: 1%;
    }
    .menu{
      margin-left: 0.5vw;
      margin-right: 0.5vw;
      color: black;
      font-size: 1vw;
      font-weight: 900;
    }
    .menu:hover {
      font-weight: 900;
      font-size: 1vw;
    }
    .top_logo_img{
      width: 14vw;
      height: 2vw;
      margin: 0;
    }
    .menu_slash{
      color: #BDBDBD;
      font-size: 1vw;
    }
    .top_logo_txt{
      font-size: 2vw;
      font-family: 'Clicker Script', cursive;
      color: #B5996D;
    }

    .top_nav a{
      text-decoration: none;
    }

    .top_title{
      width: 100%;
      background-color: white;
      height: 5vw;
    }

    .logo_img_div{
      width: 80%;
      height: 100%;
      background-color: white;
      margin: auto;
      margin-top: 5%;
    }

    html{
    font-size: 62.5%;
  }

  body{
    margin: 0;
  }

/*  end   */
/*  middle  */
	.middle{
		width: 70%;
		height: 70vw;
    margin: auto;
		background-color: transparent;
		position: relative;
	}

	.map_div{
		position: relative;
		width: 100%;
		height: 20vw;
		background-color: green;
    margin-bottom: 1%;
	}

	.list_div{
		position: relative;
		width: 100%;
		height: auto;
		background-color: yellow;
	}

  .list_content{
    position: relative;
    width: 100%;
    height: 300px;
  }

  .board{
    position: relative;
    width: 70%;
    height: 100%;
    float: left;
  }

  .board_menu{
    position: relative;
    width: 100%;
    height: auto;
    background-color: gray;
    float: left;
    text-align: center;
  }

  .register_input{
    width: 80%;
    position: relative;
  }

  .input_title{
    position: relative;
    width: 30%;
    height: 3vw;
    background-color: #242424;
    float: left;
    margin-right: 2%;
    margin-bottom: 1%;
    color: white;
    font-size: 20px;
  }

  .input_content{
    position: relative;
    width: 68%;
    height: 3vw;
    background-color: #242424;
    float: left;
    margin-bottom: 1%;
    color: white;
    font-size: 20px;
  }

  #submit_btn{
    position: relative;
    background-color: #242424;
    color: white;
    width: 10vw;
    height: 4vw;
    left: 50%;
    top: 10%;
    -webkit-transform: translate(-50%, 50%);
    -ms-transform: translate(-50%, 50%);
    -moz-transform: translate(-50%, 50%);
    -o-transform: translate(-50%, 50%);
    transform: translate(-50%, 50%);
  }

  #dog_img_id{
    width: 3vw; 
    height: 3vw;  
    float: left;
  }

  #input_feature{
    width: 40vw; 
    height: 2.5vw;
  }

/*  end  */
}

@media (max-width:750px) {
    /*  상단 고정 메뉴바 css  */
  
    .top{
      width: 100%;
      position: fixed;     /*  화면상 위치 고정  */

      z-index: 3;          /*  z값 결정  */
      top : 0;
      height: 9vw;
      background-color: white;
    }

    .top_logo{
      position: relative;
      margin-top: 0.5vw;
      margin-left: 50%;
      -webkit-transform: translate(-50%, 0%);
      -ms-transform: translate(-50%, 0%);
      -moz-transform: translate(-50%, 0%);
      -o-transform: translate(-50%, 0%);
      transform: translate(-50%, 0%);
      width: 50%;
      text-align: center;
      font-weight: 900;
    }
    .top_nav{  
      position: relative;
      /*margin-top: 3%;*/    /*  top 여백 설정  */
      width: 100%;
      margin-left: 50%;
      -webkit-transform: translate(-50%, 0%);
      -ms-transform: translate(-50%, 0%);
      -moz-transform: translate(-50%, 0%);
      -o-transform: translate(-50%, 0%);
      transform: translate(-50%, 0%);
      text-align: center;
      margin-top: 1%;
    }
    .menu{
      margin-left: 0.5vw;
      margin-right: 0.5vw;
      color: black;
      font-size: 3.1vw;
      font-weight: 900;
    }
    .menu:hover {
      font-weight: 900;
      font-size: 2vw;
    }
    .top_logo_img{
      width: 28vw;
      height: 4vw;
      margin: 0;
    }
    .menu_slash{
      color: #BDBDBD;
      font-size: 1vw;
    }
    .top_logo_txt{
      font-size: 2vw;
      font-family: 'Clicker Script', cursive;
      color: #B5996D;
    }

    .top_nav a{
      text-decoration: none;
    }

    .top_title{
      width: 100%;
      background-color: white;
      height: 5vw;
      margin-top: 10vw;
    }

    .logo_img_div{
      width: 80%;
      height: 100%;
      background-color: white;
      margin: auto;
      margin-top: 5%;
    }

    html{
    font-size: 62.5%;
  }

  body{
    margin: 0;
  }

/*  end   */
/*  middle  */
  .middle{
    width: 90%;
    height: 70vw;
    margin: auto;
    background-color: transparent;
    position: relative;
  }

  .map_div{
    position: relative;
    width: 100%;
    height: auto;
    background-color: green;
    margin-bottom: 1%;
  }

  .list_div{
    position: relative;
    width: 100%;
    height: auto;
    background-color: yellow;
  }

  .list_content{
    position: relative;
    width: 100%;
    height: 300px;
  }

  .board{
    position: relative;
    width: 70%;
    height: 100%;
    float: left;
  }

  .board_menu{
    position: relative;
    width: 100%;
    height: auto;
    background-color: gray;
    float: left;
    text-align: center;
  }

  .register_input{
    width: 80%;
    position: relative;
  }

  .input_title{
    position: relative;
    width: 30%;
    height: 9vw;
    background-color: #242424;
    float: left;
    margin-right: 2%;
    margin-bottom: 1%;
    color: white;
    font-size: 20px;
  }

  .input_content{
    position: relative;
    width: 68%;
    height: 9vw;
    background-color: #242424;
    float: left;
    margin-bottom: 1%;
    color: white;
    font-size: 20px;
  }

  #submit_btn{
    position: relative;
    background-color: #242424;
    color: white;
    width: 10vw;
    height: 4vw;
    left: 50%;
    top: 10%;
    -webkit-transform: translate(-50%, 50%);
    -ms-transform: translate(-50%, 50%);
    -moz-transform: translate(-50%, 50%);
    -o-transform: translate(-50%, 50%);
    transform: translate(-50%, 50%);
  }

  #dog_img_id{
    width: 9vw; 
    height: 9vw;  
    float: left;
  }

  #input_feature{
    width: 40vw; 
    height: 48vw;
  }

  #input_content_feature{
    height: 50vw;
  }

  #input_title_feature{
    height: 50vw;
  }
/*  end  */
}
	</style>
	<script>
              var x_marker_list = {};
              var y_marker_list = {};

              function distance(lat1, lon1, lat2, lon2, unit) {
                var radlat1 = Math.PI * lat1/180
                var radlat2 = Math.PI * lat2/180
                var theta = lon1-lon2
                var radtheta = Math.PI * theta/180
                var dist = Math.sin(radlat1) * Math.sin(radlat2) + Math.cos(radlat1) * Math.cos(radlat2) * Math.cos(radtheta);
                dist = Math.acos(dist)
                dist = dist * 180/Math.PI
                dist = dist * 60 * 1.1515
                if (unit=="K") { dist = dist * 1.609344 }
                if (unit=="N") { dist = dist * 0.8684 }
                return dist
              }

              function my_location(){
                  var map = new google.maps.Map(document.getElementById('map'), {
                    center: {lat: -34.397, lng: 150.644},
                    zoom: 12
                  });
                  var infoWindow = new google.maps.InfoWindow({map: map});

                  var geocoder = new google.maps.Geocoder();

	                document.getElementById('submit').addEventListener('click', function() {
	                  geocodeAddress(geocoder, map);
	                });

                  // Try HTML5 geolocation.
                  if (navigator.geolocation) {
                    navigator.geolocation.getCurrentPosition(function(position) {
                      var pos = {
                        lat: position.coords.latitude,
                        lng: position.coords.longitude
                      };

                      infoWindow.setPosition(pos);
                      infoWindow.setContent('Location found.');
                      map.setCenter(pos);
                     
                    }, function() {
                      handleLocationError(true, infoWindow, map.getCenter());
                    });
                  } else {
                    // Browser doesn't support Geolocation
                    handleLocationError(false, infoWindow, map.getCenter());
                  }

                function handleLocationError(browserHasGeolocation, infoWindow, pos) {
                  infoWindow.setPosition(pos);
                  infoWindow.setContent(browserHasGeolocation ?
                                        'Error: The Geolocation service failed.' :
                                        'Error: Your browser doesn\'t support geolocation.');
                }
              }


  			      var map;
  			      function initMap() {


  			        map = new google.maps.Map(document.getElementById('map'), {
  			          zoom: 16,
  			          center: new google.maps.LatLng(37.49, 127.02),
  			          mapTypeId: 'roadmap'
  			        });

	  	           var geocoder = new google.maps.Geocoder();

	                document.getElementById('submit').addEventListener('click', function() {
	                  geocodeAddress(geocoder, map);
	                });
  			      }


  			      function geocodeAddress(geocoder, resultsMap) {
  			        var address = document.getElementById('address').value;
  			        geocoder.geocode({'address': address}, function(results, status) {
  			          if (status === 'OK') {
  			            resultsMap.setCenter(results[0].geometry.location);
  			            var marker = new google.maps.Marker({
  			              map: resultsMap,
  			              position: results[0].geometry.location			         
  			            });
  			            $('#location_name').val(address);
  			            $('#lat').val(results[0].geometry.location.lat());
  			            $('#lng').val(results[0].geometry.location.lng());

  			            $('#location_name_txt').html(address);
  			            $('#lat_txt').html(results[0].geometry.location.lat());
  			            $('#lng_txt').html(results[0].geometry.location.lng());
  			          } else {
  			            alert('Geocode was not successful for the following reason: ' + status);
  			          }
  			        });
  			      }


              function readURL(input) {
                  if (input.files && input.files[0]) {
                      var reader = new FileReader();

                      reader.onload = function (e) {
                          $('#dog_img_id').css('display', 'block');
                          $('#dog_img_id').attr('src', e.target.result);
                      }

                      reader.readAsDataURL(input.files[0]);
                  }
              }

              $(document).ready(function(){
                $("#dog_img_input").change(function () {
                      var img_src = $(this).val();
                      readURL(this);
                    });
              });

              var flag1 = 0;
              var flag2 = 0;
              var flag3 = 0;

              $(window).scroll(function () {

                var w = $(window).width();

                //alert(w);

                /*  scroll 값  */
                var height = $(document).scrollTop();


                //alert(w);

                if(w > 500){

                    /*  상단 고정 메뉴바 이벤트  */
                    if(height > 100){
                        if(flag3==0){
                            $('.top').css("background-color", "#B5996D");
                            $('.top_logo_img').attr("src", "../../static/img/logo_txt_white.png");
                            //$('.top_logo_txt').animate({fontSize: '1.3rem'}, "fast");
                            $('.menu').css("color", "#ffffff");
                            
                            $('.top_logo').animate({
                                marginLeft : '10%',
                            });

                            $('.top_nav').animate({
                                marginLeft : '80%',
                                marginTop : '-2%'
                            });

                            $('.top').animate({
                                height : '3vw',
                            });

                            $('.top_nav').css({
                                /*
                                '-webkit-transform' : 'translate(-50%, 0%)',
                                '-ms-transform' : 'translate(-50%, 0%)',
                                '-moz-transform' : 'translate(-50%, 0%)',
                                '-o-transform' : 'translate(-50%, 0%)',
                                'transform' : 'translate(-50%, 0%)'
                                */
                            });
                            
                            flag3=1;
                        }
                    }

                    if(height < 100){
                        if(flag3==1){
                            $('.top').css("background-color", "white");
                            $('.top_logo_img').attr("src", "../../static/img/logo_txt_color.png");
                            //$('.top_logo_txt').animate({fontSize: '1rem'}, "fast");
                            $('.menu').css("color", "black");
                            

                            $('.top_logo').animate({
                                marginLeft : '50%',
                            });

                            $('.top_nav').animate({
                                marginLeft: '50%',
                                marginTop : '1%'
                            });

                            $('.top').animate({
                                height : '5vw',
                            });

                            $('.top_nav').css({
                                '-webkit-transform' : 'translate(-50%, 0%)',
                                '-ms-transform' : 'translate(-50%, 0%)',
                                '-moz-transform' : 'translate(-50%, 0%)',
                                '-o-transform' : 'translate(-50%, 0%)',
                                'transform' : 'translate(-50%, 0%)'
                            });
                            flag3=0;
                        }
                    }
                }


                if(w < 500){
                    if(height > 100){
                        $('.top').css({
                                '-webkit-transform' : 'translate(0%, -50%)',
                                '-ms-transform' : 'translate(0%, -50%)',
                                '-moz-transform' : 'translate(0%, -50%)',
                                '-o-transform' : 'translate(0%, -50%)',
                                'transform' : 'translate(0%, -50%)'
                            });
                    }

                    if(height < 100){
                        $('.top').css({
                                '-webkit-transform' : 'translate(0%, 0%)',
                                '-ms-transform' : 'translate(0%, 0%)',
                                '-moz-transform' : 'translate(0%, 0%)',
                                '-o-transform' : 'translate(0%, 0%)',
                                'transform' : 'translate(0%, 0%)'
                            });
                    }
                }
});

            function form_submit(){
              var p = document.frm;
              p.submit();
            }
  			    </script>

  			    <script async defer
  			    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyA_E5Ls2VQ_yDsadA9-KhCLTBFoJ6AxuJo&callback=initMap">
  			    </script>
</head>

<body>
	<div class='top'>
      <div class='top_logo'>
        <img class='top_logo_img' src="../../static/img/logo_txt_color.png">  
      </div>
      <div class='top_nav'>
        <a href="../"><span class="menu" id="w"> HOME </span></a>
        <span class='menu_slash'> / </span>
        <a href="../matching"><span class="menu" id="tmp"> 강아지매칭 </span></a>
        <span class='menu_slash'> / </span>
        <a href="../notice"><span class="menu" id="h"> 실종신고 </span></a>
        <span class='menu_slash'> / </span>
        <a href="../stats"><span class="menu" id="h"> 통개자료 </span></a>
        <span class='menu_slash'> / </span>
        <a href="../shelter"><span class="menu" id="h"> 보호소 </span></a>
        <span class='menu_slash'> / </span>
        <a href="../donator"><span class="menu" id="h"> 멍예의전당 </span></a>
        <span class='menu_slash'> / </span>
        <a href="../about_us"><span class="menu"> ABOUT US </span></a>
      </div>
  </div>

    <div class="top_title">
      <div class="logo_img_div">
        <p style="font-size: 1.5vw; font-weight: 900;">
        <img src="../../static/img/logo_img_color.png" align="middle" style="width: 5vw; height: auto;">
        실종신고

        </p>
      </div>
    </div>

    <div class='middle'>
    	<div class='map_div'>
      		<div id="floating-panel">
  		      <input id="address" type="textbox" value="">
  		      <input id="submit" type="button" value="검색">
            <button onclick="my_location()">my location</button>
  		    </div>
      		<div id="map"></div>
      </div>
    	<div class='board_menu'>
        <Br><br>
        <span style="font-size: 24px; color: white;">[ 잃어버린 강아지 등록하기 ]</span>
        <br><br>
	     <form method="POST" enctype="multipart/form-data" name="frm" action="../notice/">
		    {% csrf_token %}
        <div style="width: 100%; height: auto; background-color: gray; position: relative;">
  		    <p class="register_input">
            <div class="input_title">
              강아지사진
            </div>
            <div class="input_content">
              {% if dog == None %}
              <img id="dog_img_id" src="" style="display: none;">
    			    <input type="file" name="dog_image" id="dog_img_input" style="position: absolute;">
    			    {% else %}
              <img id="dog_img_id" src="{{dog.img_src}}" style="">
    			    <input type="file" id="dog_img_input" name="dog_image" value="{{dog.img_src}}" style="float: left;">
    			    {% endif %}
            </div>
    			</p>
    			<p  class="register_input">
              <div class="input_title">
      		    	강아지이름
              </div>
              <div class="input_content">
      		    	{% if dog == None %}
      			    <input type="text" name="dog_name">
      			    {% else %}
      			    <input type="text" name="dog_name" value="{{dog.dog_name}}">
      			    {% endif %}
              </div>
    			</p>
    			<p class="register_input">
              <div class="input_title">
      		    	위치&nbsp;
              </div>
              <div class="input_content">
      		    	{% if dog == None %}
      			    <input type="text" id="location_name" name="location_name" hidden>
      			    <span id="location_name_txt" style="font-size: 20px;">
      			    	위치를 지정해주세요.
      			    </span>
      			    {% else %}
      			    <input type="text" id="location_name" name="location_name" value="{{dog.location_name}}" hidden>
      			    <span id="location_name_txt" style="font-size: 20px;">
      			    	{{dog.location_name}}
      			    </span>
      			    {% endif %}
              </div>
    			</p>
    			<p style="display: none;">
    		    	위도&nbsp;
    		    	{% if dog == None %}
    			    <input type="text" id="lat" name="lat" hidden>
    			    <span id="lat_txt" style="font-size: 20px;">

    			    </span>
    			    {% else %}
    			    <input type="text" id="lat" name="lat" value="{{dog.x}}" hidden>
    			    <span id="lat_txt" style="font-size: 20px;">
    			    	{{dog.x}}
    			    </span>
    			    {% endif %}
    			    <br>
    			    경도&nbsp;
    			    {% if dog == None %}
    			    <input type="text" id="lng" name="lng" hidden>
    			    <span id="lng_txt" style="font-size: 20px;">

    			    </span>
    			    {% else %}
    			    <input type="text" id="lng" name="lng" value="{{dog.y}}" hidden>
    			    <span id="lng_txt" style="font-size: 20px;">
    			    	{{dog.y}}
    			    </span>
    			    {% endif %}
    			</p>
          <p class="register_input">
            <div class="input_title">
              잃어버린 날짜&nbsp;
            </div>
            <div class="input_content">
              {% if dog == None %}
              <input type="date" name="losted_at" value="none">
              {% else %}
              <input type="date" name="losted_at" value="{{dog.losted_at}}">
              {% endif %}
            </div>
          </p>
          <p class="register_input">
            <div class="input_title" id="input_title_feature">
              강아지 특징&nbsp;
            </div>
            <div class="input_content" id="input_content_feature">
              {% if dog == None %}
              <input type="text" id="input_feature" style="" name="feature" maxlength="200" placeholder="200글자 이내로 적어주세요.">
              {% else %}
              <input type="text" id="input_feature" style="" name="feature" value="{{dog.feature}}">
              {% endif %}
            </div>
          </p>
          <p class="register_input">
            <div class="input_title" id="input_title_feature">
              사례금&nbsp;
            </div>
            <div class="input_content" id="input_content_feature">
              {% if dog == None %}
              <input type="text" style="" name="reward" maxlength="20">
              {% else %}
              <input type="text" style="" name="reward" value="{{dog.reward}}">
              {% endif %}
            </div>
          </p>
          <p class="register_input">
            <div class="input_title" id="input_title_feature">
              연락처&nbsp;
            </div>
            <div class="input_content" id="input_content_feature">
              {% if dog == None %}
              <input type="text" style="" name="phone" maxlength="20" placeholder="000-0000-0000">
              {% else %}
              <input type="text" style="" name="phone" value="{{dog.phone}}">
              {% endif %}
            </div>
          </p>
    			<p class="register_input">
            <div class="input_title">
      				비밀번호&nbsp;
            </div>
            <div class="input_content">
      				{% if dog == None %}
      				<input type="text" id="input_password" name="psw_txt" placeholder="게시글을 수정/삭제 할 때 이용됩니다.">
      				{% else %}
      				<input type="text" id="input_password" name="psw_txt" value="{{dog.psw}}" placeholder="게시글을 수정/삭제 할 때 이용됩니다.">
      				{% endif %}
            </div>
    			</p>
    			<p style="display: none;">
    				{% if dog == None %}
    				<input type="text" name="pk_value" value="none" hidden>
    				{% else %}
    				<input type="text" name="pk_value" value="{{dog.pk}}" hidden>
    				{% endif %}
    			</p>
        </div>
		  </form>
      </div>

      <button id="submit_btn" onclick="form_submit();"> 업로드 </button>
    </div>
</body>
</html>