<!DOCTYPE html>
<html>
<head>
	<title></title>
	<script type="text/javascript">

		var canvas = document.createElement('canvas');
		//캔버스 크기 설정
		canvas.width = 500; //가로 100px
		canvas.height = 500; //세로 100px
		var context = canvas.getContext("2d");
		context.globalCompositeOperation = "source-over";

		var $file = document.querySelector('#getfile');
		var $candle = document.querySelector('#candle');
		var candleData = JSON.parse($candle.innerText).data;
		alert("!!!!");

		$file.onchange = function () { 

		    var fileList = $file.files;

		    // 읽기
		    var reader = new FileReader();
		    reader.readAsDataURL(fileList [0]);

		    //로드 한 후
		    reader.onload = function  () {
		        //썸네일 이미지 생성
		        var tempImage = new Image(); //drawImage 메서드에 넣기 위해 이미지 객체화
		        tempImage.src = reader.result; //data-uri를 이미지 객체에 주입
		        tempImage.onload = function () {
		            //이미지를 캔버스에 그리기
		            context.drawImage(this, 0, 0, 500, 500);
		            
		            var candleImage = new Image();
		        		candleImage.src = candleData;

		          	candleImage.onload = function () {
		              //이미지를 캔버스에 그리기
		              context.drawImage(this, 0, 0, 500, 500);

					  //캔버스에 그린 이미지를 다시 data-uri 형태로 변환
		              var dataURI = canvas.toDataURL("image/jpeg");

		              //썸네일 이미지 보여주기
		              document.querySelector('#preview').src = dataURI;

		              //썸네일 이미지를 다운로드할 수 있도록 링크 설정
		              document.querySelector('#download').href = dataURI;


		            };
		        };
		    };
		};

	</script>
	<style type="text/css">
		img {
		    margin: 1em 0;
		    display: block;
		    background: rgb(240, 240, 240);
		    border: 1px solid rgb(0,0,0);
		}
	</style>
</head>
<body>
	<a id="download" download="thumbnail.jpg" target="_blank">
		<img id="preview" src="" width="300" alt="로컬에 있는 이미지가 보여지는 영역">
	</a>
<input type="file" id="getfile" accept="image/*">
<script id="candle" type="application/json">
{
	"data": 
	"data:image/png;base64,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"
}
</script>
</body>
</html>